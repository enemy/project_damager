<%= form_for @project, :url => user_project_path do |project_form| %>
  <div>
    <%= project_form.label :name, 'Project name:' %>
    <%= project_form.text_field :name %>
  </div>

  <!-- Here we call fields_for on the project_form builder instance.
       The block is called for each member of the tasks collection. -->
  <%= project_form.fields_for :tasks do |task_form| %>
      <p>
        <div>
          <%= task_form.label :name, 'Task:' %>
          <%= task_form.text_field :name %>
        </div>

        <% unless task_form.object.new_record? %>
          <div>
            <%= task_form.label :_destroy, 'Remove:' %>
            <%= task_form.check_box :_destroy %>
          </div>
        <% end %>
      </p>
  <% end %>

  <%= project_form.submit %>
<% end %>